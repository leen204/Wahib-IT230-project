<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eligibility Test | Wahib</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="base.css">
</head>
<body onload="guard('donor')">
<header class="w-header"></header>

<section class="container" style="max-width:700px;margin-top:40px">
  <h2>Eligibility Test</h2>
  <p class="muted">Please answer the following quick questions honestly to check if you are eligible to donate blood.</p>

  <form id="testForm" class="panel" style="display:grid;gap:18px">
    <div>
      <label>1. Are you in good health today?</label>
      <select required>
        <option value="">Select...</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>
    </div>

    <div>
      <label>2. Have you donated blood in the past 3 months?</label>
      <select required>
        <option value="">Select...</option>
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>
    </div>

    <div>
      <label>3. Are you above 18 years old?</label>
      <select required>
        <option value="">Select...</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>
    </div>

    <div>
      <label>4. Are you free from any infectious diseases?</label>
      <select required>
        <option value="">Select...</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>
    </div>

    <button class="w-btn" type="submit">Submit Test</button>
  </form>
</section>

<footer class="w-footer"></footer>
<div id="w-toast"></div>
<script src="app.js"></script>
<script src="ui.js"></script>
<script src="footer.js"></script>
<script>
document.getElementById('testForm').addEventListener('submit', e=>{
  e.preventDefault();
  const answers = [...document.querySelectorAll('#testForm select')].map(s=>s.value);
  if(answers.includes('no')){
    setEligible(false);
    toast('You are currently not eligible to donate.','err');
  } else {
    setEligible(true);
    toast('âœ… You are eligible to donate!');
  }
  setTimeout(()=> location.href='profile.html', 1200);
});
</script>
</body>
</html>
